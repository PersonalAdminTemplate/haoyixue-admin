(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ddf4dfe"],{"1f3e":function(e,t,a){},"3c75":function(e,t,a){"use strict";var r=a("1f3e"),s=a.n(r);s.a},"45eb":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"-24px -24px 0px"}},[a("page-header",{attrs:{breadcrumb:e.breadcrumb,title:e.title,logo:e.logo,avatar:e.avatar}},[e._t("action",null,{slot:"action"}),e._t("headerContent",null,{slot:"content"}),!this.$slots.headerContent&&e.desc?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)"}},[e._v(" "+e._s(e.desc)+" ")]),a("div",{staticClass:"link"},[e._l(e.linkList,(function(t,r){return[a("a",{key:r,attrs:{href:t.href}},[a("a-icon",{attrs:{type:t.icon}}),e._v(e._s(t.title))],1)]}))],2)]):e._e(),e._t("extra",null,{slot:"extra"})],2),a("div",{ref:"page",class:["page-content",e.layout]},[e._t("default")],2)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("div",{class:["page-header-wide",e.layout]},[a("div",{staticClass:"breadcrumb"},[a("a-breadcrumb",e._l(e.breadcrumb,(function(t,r){return a("a-breadcrumb-item",{key:t.path},[a("span",0===r?[a("a",{attrs:{href:"#"}},[e._v(e._s(t.name))])]:[e._v(e._s(t.name))])])})),1)],1),a("div",{staticClass:"detail"},[e.avatar?a("div",{staticClass:"avatar"},[a("a-avatar",{attrs:{src:e.avatar}})],1):e._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"row"},[e.logo?a("img",{staticClass:"logo",attrs:{src:e.logo}}):e._e(),e.title?a("h1",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),a("div",{staticClass:"action"},[e._t("action")],2)]),a("div",{staticClass:"row"},[this.$slots.content?a("div",{staticClass:"content"},[e._t("content")],2):e._e(),this.$slots.extra?a("div",{staticClass:"extra"},[e._t("extra")],2):e._e()])])])])])},o=[],i={name:"PageHeader",props:{title:{type:String,required:!1},breadcrumb:{type:Array,required:!1},logo:{type:String,required:!1},avatar:{type:String,required:!1}},computed:{layout:function(){return this.$store.state.setting.layout}}},c=i,l=(a("f010"),a("2877")),d=Object(l["a"])(c,n,o,!1,null,"ecb806fe",null),u=d.exports,m={name:"PageLayout",components:{PageHeader:u},props:{desc:{type:String,default:""},logo:{type:String},title:{type:String,default:""},avatar:{type:String},linkList:{type:Array},extraImage:{type:String}},data:function(){return{breadcrumb:[]}},computed:{layout:function(){return this.$store.state.setting.layout}},mounted:function(){this.getBreadcrumb()},updated:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){this.breadcrumb=this.$route.matched}}},h=m,p=(a("d2e6"),Object(l["a"])(h,r,s,!1,null,"90fa1ce6",null));t["a"]=p.exports},"4f18":function(e,t,a){"use strict";var r=a("75e9"),s=a.n(r);s.a},7141:function(e,t,a){},"75e9":function(e,t,a){},9351:function(e,t,a){"use strict";var r=a("7141"),s=a.n(r);s.a},b5e3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-layout",{attrs:{desc:e.setting.desc,title:e.setting.title,linkList:e.setting.linkList,id:"bill-product"}},[a("div",{staticClass:"extraImg",attrs:{slot:"extra"},slot:"extra"},[a("img",{attrs:{src:e.setting.extraImage}})]),a("transition",{attrs:{name:"page-toggle"}},[a("keep-alive",[a("a-card",{staticClass:"content"},[a("a-form",{attrs:{form:e.searchForm.form,layout:"inline"},on:{submit:e.onSearch}},[a("a-row",{attrs:{type:"flex",align:"middle"}},[a("a-col",[a("a-spin",{attrs:{spinning:e.searchForm.isSchoolLoading}},[a("a-form-item",{attrs:{label:"学校"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["school",{initialValue:e.searchForm.schoolCode,rules:[{required:!0,message:"请选择学校"}]}],expression:"[\n                            'school',\n                            {\n                              initialValue: searchForm.schoolCode,\n                              rules: [{ required: true, message: '请选择学校' }]\n                            }\n                          ]"}],attrs:{placeholder:"请选择学校",showArrow:""},on:{change:e.onSchoolChange}},e._l(e.searchForm.schoolList,(function(t,r){return a("a-select-option",{key:r,staticStyle:{width:"100px"},attrs:{title:t.schoolName,value:t.schoolCode}},[e._v(" "+e._s(t.schoolName)+" ")])})),1)],1)],1)],1),a("a-col",{staticStyle:{"flex-grow":"1"}},[a("a-form-item",[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.searchForm.isLoading,disabled:e.searchForm.isLoading}},[e._v(" 查询 ")])],1)],1),a("a-col",[a("a-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v(" 新增缴费项目 ")])],1)],1)],1),a("a-table",{staticClass:"table",attrs:{id:"table",columns:e.table.columns,dataSource:e.table.billProductsList,rowKey:"id",bordered:"",loading:e.table.isLoading},scopedSlots:e._u([{key:"desc",fn:function(t){return[a("a-tooltip",{attrs:{placement:"bottomRight",title:t,overlayClassName:"overlay",autoAdjustOverflow:!0}},[a("p",{staticClass:"desc"},[e._v(" "+e._s(t.replace(/\\n/g,""))+" ")])])]}},{key:"operation",fn:function(t,r){return[a("div",{staticClass:"editable-row-operations"},[a("span",[a("a",{staticStyle:{color:"#f5222d"},on:{click:function(){return e.onDelete(r.id)}}},[e._v("删除")])])])]}}])})],1)],1)],1),a("a-modal",{staticClass:"add-modal",attrs:{visible:e.addForm.isVisible,title:"新增缴费项目",okText:"确定",cancelText:"取消",okButtonProps:{props:{loading:e.addForm.isLoading}}},on:{cancel:e.cancelAdd,ok:e.saveAdd}},[a("a-form",{attrs:{layout:"vertical",form:e.addForm.form}},[e.searchForm.schoolList.length>0?a("a-form-item",{attrs:{label:"学校"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["schoolCode",{initialValue:e.searchForm.schoolCode,rules:[{required:!0,message:"请选择学校"}]}],expression:"[\n                    'schoolCode',\n                    {\n                      initialValue: searchForm.schoolCode,\n                      rules: [{ required: true, message: '请选择学校' }]\n                    }\n                  ]"}],attrs:{placeholder:"请选择学校",showArrow:""}},e._l(e.searchForm.schoolList,(function(t,r){return a("a-select-option",{key:r,staticStyle:{width:"100px"},attrs:{title:t.schoolName,value:t.schoolCode}},[e._v(" "+e._s(t.schoolName)+" ")])})),1)],1):e._e(),a("a-form-item",{attrs:{label:"项目名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["productName",{rules:[{required:!0,message:"请填写缴费项目名称"}]}],expression:"[\n                  'productName',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请填写缴费项目名称'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{autoFocus:"",maxLength:20}})],1),a("a-form-item",{attrs:{label:"项目描述"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["desc",{rules:[{required:!0,message:"请填写内容描述"}]}],expression:"[\n                  'desc',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请填写内容描述'\n                      }\n                    ]\n                  }\n                ]"}],staticStyle:{resize:"none"},attrs:{type:"textarea",rows:"5"}})],1),a("a-form-item",{attrs:{label:"项目价格",wrapperCol:{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"价格不能为空,且需要数字"}]}],expression:"[\n                  'price',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '价格不能为空,且需要数字'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{oninput:"value=value.replace(/[^\\d]/g,'')"}})],1),a("a-form-item",{attrs:{label:"项目折扣格",wrapperCol:{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discountPrice",{rules:[{required:!0,message:"价格不能为空,且需要数字"}]}],expression:"[\n                  'discountPrice',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '价格不能为空,且需要数字'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{oninput:"value=value.replace(/[^\\d]/g,'')"}})],1)],1)],1)],1)},s=[],n=(a("d3b7"),a("96cf"),a("45eb")),o={name:"QueryList",components:{PageLayout:n["a"]},data:function(){return{setting:{title:"",desc:"",linkList:[],extraImage:""},searchForm:{form:this.$form.createForm(this,{name:"form"}),schoolList:[],schoolCode:"",isLoading:!1,isSchoolLoading:!1},addForm:{form:this.$form.createForm(this,{name:"addForm"}),isVisible:!1,isLoading:!1},table:{billProductsList:[],isLoading:!1,columns:[{title:"学校编码",dataIndex:"orgNo",scopedSlots:{customRender:"orgNo"},align:"center"},{title:"项目名称",dataIndex:"productName",scopedSlots:{customRender:"productName"}},{title:"项目描述",dataIndex:"desc",scopedSlots:{customRender:"desc"},width:400},{title:"价格",dataIndex:"price",scopedSlots:{customRender:"price"},align:"center"},{title:"折扣价",dataIndex:"discountPrice",scopedSlots:{customRender:"discountPrice"},align:"center"},{title:"创建时间",dataIndex:"updateTime",scopedSlots:{customRender:"updateTime"},align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"}]}}},methods:{onSearch:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),this.searchForm.isLoading=!0,t.next=4,regeneratorRuntime.awrap(this.getBillProductsByOrg());case 4:this.searchForm.isLoading=!1;case 5:case"end":return t.stop()}}),null,this)},onSchoolChange:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.searchForm.schoolCode=e;case 1:case"end":return t.stop()}}),null,this)},onDelete:function(e){this.$info({title:"此功能还未启用",onOk:function(){}})},onAdd:function(){this.addForm.isVisible=!0},saveAdd:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.createBillProduct());case 2:this.getBillProductsByOrg();case 3:case"end":return e.stop()}}),null,this)},cancelAdd:function(){this.addForm.isVisible=!1},createBillProduct:function(){var e,t,a=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(this.addForm.isLoading=!0,this.addForm.form.validateFields((function(a,r){t=a,e={sendId:1,type:98,price:r.price-0,orgNo:r.schoolCode,productName:r.productName,desc:r.desc,discountPrice:r.discountPrice-0}})),!t){r.next=6;break}this.addForm.isLoading=!1,r.next=10;break;case 6:return r.next=8,regeneratorRuntime.awrap(this.$api.createBillProduct(e).then((function(e){1===e.code&&a.$message.success("添加成功")})));case 8:this.addForm.isLoading=!1,this.addForm.isVisible=!1;case 10:case"end":return r.stop()}}),null,this)},getBillProductsByOrg:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.table.isLoading=!0,this.table.billProductsList=[],t.next=4,regeneratorRuntime.awrap(this.$api.getBillProductsByOrg({orgNo:this.searchForm.schoolCode}).then((function(t){1===t.code&&t.data&&(e.table.billProductsList=t.data)})));case 4:this.table.isLoading=!1;case 5:case"end":return t.stop()}}),null,this)},findSchoolList:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.searchForm.isSchoolLoading=!0,t.next=3,regeneratorRuntime.awrap(this.$api.findSchoolList().then((function(t){var a;1===t.code&&t.data&&(e.searchForm.schoolCode=(null===t||void 0===t?void 0:null===(a=t.data[0])||void 0===a?void 0:a.schoolCode)||"",e.searchForm.schoolList=t.data)})));case 3:this.searchForm.isSchoolLoading=!1;case 4:case"end":return t.stop()}}),null,this)},initData:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.findSchoolList());case 2:this.getBillProductsByOrg();case 3:case"end":return e.stop()}}),null,this)}},created:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return this.$npStart(),e.next=3,regeneratorRuntime.awrap(this.initData());case 3:this.$npDone();case 4:case"end":return e.stop()}}),null,this)}},i=o,c=(a("3c75"),a("4f18"),a("9351"),a("2877")),l=Object(c["a"])(i,r,s,!1,null,"578353c4",null);t["default"]=l.exports},d2e6:function(e,t,a){"use strict";var r=a("e675"),s=a.n(r);s.a},e181:function(e,t,a){},e675:function(e,t,a){},f010:function(e,t,a){"use strict";var r=a("e181"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-0ddf4dfe.9f2cab12.js.map