(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e8e06cd"],{"45eb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"-24px -24px 0px"}},[a("page-header",{attrs:{breadcrumb:t.breadcrumb,title:t.title,logo:t.logo,avatar:t.avatar}},[t._t("action",null,{slot:"action"}),t._t("headerContent",null,{slot:"content"}),!this.$slots.headerContent&&t.desc?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)"}},[t._v(" "+t._s(t.desc)+" ")]),a("div",{staticClass:"link"},[t._l(t.linkList,(function(e,n){return[a("a",{key:n,attrs:{href:e.href}},[a("a-icon",{attrs:{type:e.icon}}),t._v(t._s(e.title))],1)]}))],2)]):t._e(),t._t("extra",null,{slot:"extra"})],2),a("div",{ref:"page",class:["page-content",t.layout]},[t._t("default")],2)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("div",{class:["page-header-wide",t.layout]},[a("div",{staticClass:"breadcrumb"},[a("a-breadcrumb",t._l(t.breadcrumb,(function(e,n){return a("a-breadcrumb-item",{key:e.path},[a("span",0===n?[a("a",{attrs:{href:"#"}},[t._v(t._s(e.name))])]:[t._v(t._s(e.name))])])})),1)],1),a("div",{staticClass:"detail"},[t.avatar?a("div",{staticClass:"avatar"},[a("a-avatar",{attrs:{src:t.avatar}})],1):t._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"row"},[t.logo?a("img",{staticClass:"logo",attrs:{src:t.logo}}):t._e(),t.title?a("h1",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),a("div",{staticClass:"action"},[t._t("action")],2)]),a("div",{staticClass:"row"},[this.$slots.content?a("div",{staticClass:"content"},[t._t("content")],2):t._e(),this.$slots.extra?a("div",{staticClass:"extra"},[t._t("extra")],2):t._e()])])])])])},r=[],o={name:"PageHeader",props:{title:{type:String,required:!1},breadcrumb:{type:Array,required:!1},logo:{type:String,required:!1},avatar:{type:String,required:!1}},computed:{layout:function(){return this.$store.state.setting.layout}}},c=o,l=(a("f010"),a("2877")),u=Object(l["a"])(c,i,r,!1,null,"ecb806fe",null),d=u.exports,h={name:"PageLayout",components:{PageHeader:d},props:{desc:{type:String,default:""},logo:{type:String},title:{type:String,default:""},avatar:{type:String},linkList:{type:Array},extraImage:{type:String}},data:function(){return{breadcrumb:[]}},computed:{layout:function(){return this.$store.state.setting.layout}},mounted:function(){this.getBreadcrumb()},updated:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){this.breadcrumb=this.$route.matched}}},p=h,f=(a("d2e6"),Object(l["a"])(p,n,s,!1,null,"90fa1ce6",null));e["a"]=f.exports},4950:function(t,e,a){"use strict";var n=a("8183"),s=a.n(n);s.a},"750d":function(t,e,a){"use strict";var n=a("bf96"),s=a.n(n);s.a},8183:function(t,e,a){},bf96:function(t,e,a){},d2e6:function(t,e,a){"use strict";var n=a("e675"),s=a.n(n);s.a},df87:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-layout",{attrs:{id:"home"}},[a("div",{staticClass:"extraImg",attrs:{slot:"extra"},slot:"extra"},[a("img",{attrs:{src:t.setting.extraImage}})]),a("transition",{attrs:{name:"page-toggle"}},[a("keep-alive",[a("a-card",{staticClass:"content"},[a("a-list",{attrs:{itemLayout:"horizontal",split:"",loading:t.list.isLoading,dataSource:t.list.data},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("h3",{staticStyle:{width:"100%",display:"flex","flex-direct":"row","justify-content":"space-between"}},[t._v(" "+t._s(e.schoolName)+" "),a("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.onSync(e.schoolCode)}}},[t._v(" 同步 ")])],1)])}}])})],1)],1)],1),a("a-modal",{staticClass:"add-modal",attrs:{visible:t.sync.isVisible,title:"注意",okText:"确定",cancelText:"取消",okButtonProps:{props:{loading:t.sync.isLoading}}},on:{cancel:t.cancelSync,ok:t.saveSync}},[t._v(" 确认同步吗? ")]),a("a-modal",{attrs:{visible:t.syncModal.isVisible,title:"注意"},on:{cancel:function(e){t.syncModal.isVisible=!1}}},[a("div",[a("p",[t._v("每分钟只能同步一次")]),a("p",[t._v("还剩: "+t._s(t.syncModal.count)+" 秒")])]),a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){t.syncModal.isVisible=!1}}},[t._v("确定")])],1)],2)],1)},s=[],i=(a("d3b7"),a("96cf"),a("45eb")),r=(a("e033"),{name:"QueryList",components:{PageLayout:i["a"]},data:function(){return{setting:{title:"",desc:"",linkList:[],extraImage:""},sync:{isVisible:!1,schoolCode:null,isLoading:!1},syncModal:{count:-1,interval:null,isVisible:!1},list:{data:[],isLoading:!1}}},methods:{onSync:function(t){this.sync.schoolCode=t;var e=this.syncModal;e.count>0?e.isVisible=!0:this.sync.isVisible=!0},saveSync:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.syncSchoolData());case 2:case"end":return t.stop()}}),null,this)},cancelSync:function(){this.sync.isVisible=!1},syncSchoolData:function(){var t,e,a,n=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t=this.syncModal,e=this.sync,e.isLoading=!0,a={schoolCode:e.schoolCode},s.next=5,regeneratorRuntime.awrap(this.$api.syncSchoolData(a).then((function(e){0===e.code&&(n.$message.success("同步成功"),t.count=60,t.interval=setInterval((function(){t.count-=1}),1e3))})));case 5:e.isLoading=!1,e.isVisible=!1;case 7:case"end":return s.stop()}}),null,this)},findSchoolList:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return this.list.isLoading=!0,e.next=3,regeneratorRuntime.awrap(this.$api.findSchoolList().then((function(e){var a;1===e.code&&e.data&&(t.list.schoolCode=(null===e||void 0===e?void 0:null===(a=e.data[0])||void 0===a?void 0:a.schoolCode)||"",t.list.data=e.data)})));case 3:this.list.isLoading=!1;case 4:case"end":return e.stop()}}),null,this)},initData:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.findSchoolList());case 2:case"end":return t.stop()}}),null,this)}},created:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.$npStart(),t.next=3,regeneratorRuntime.awrap(this.initData());case 3:this.$npDone();case 4:case"end":return t.stop()}}),null,this)},watch:{"syncModal.count":function(){var t=this.syncModal;0===t.count&&(clearInterval(t.interval),t.isVisible=!1)}}}),o=r,c=(a("4950"),a("750d"),a("2877")),l=Object(c["a"])(o,n,s,!1,null,"4614d302",null);e["default"]=l.exports},e181:function(t,e,a){},e675:function(t,e,a){},f010:function(t,e,a){"use strict";var n=a("e181"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-7e8e06cd.46344f6f.js.map