(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-062f1996"],{"0ac6":function(e,t,a){"use strict";var r=a("7d6b"),i=a.n(r);i.a},"29e2":function(e,t,a){},"45eb":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"-24px -24px 0px"}},[a("page-header",{attrs:{breadcrumb:e.breadcrumb,title:e.title,logo:e.logo,avatar:e.avatar}},[e._t("action",null,{slot:"action"}),e._t("headerContent",null,{slot:"content"}),!this.$slots.headerContent&&e.desc?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)"}},[e._v(" "+e._s(e.desc)+" ")]),a("div",{staticClass:"link"},[e._l(e.linkList,(function(t,r){return[a("a",{key:r,attrs:{href:t.href}},[a("a-icon",{attrs:{type:t.icon}}),e._v(e._s(t.title))],1)]}))],2)]):e._e(),e._t("extra",null,{slot:"extra"})],2),a("div",{ref:"page",class:["page-content",e.layout]},[e._t("default")],2)],1)},i=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-header"},[a("div",{class:["page-header-wide",e.layout]},[a("div",{staticClass:"breadcrumb"},[a("a-breadcrumb",e._l(e.breadcrumb,(function(t,r){return a("a-breadcrumb-item",{key:t.path},[a("span",0===r?[a("a",{attrs:{href:"#"}},[e._v(e._s(t.name))])]:[e._v(e._s(t.name))])])})),1)],1),a("div",{staticClass:"detail"},[e.avatar?a("div",{staticClass:"avatar"},[a("a-avatar",{attrs:{src:e.avatar}})],1):e._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"row"},[e.logo?a("img",{staticClass:"logo",attrs:{src:e.logo}}):e._e(),e.title?a("h1",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),a("div",{staticClass:"action"},[e._t("action")],2)]),a("div",{staticClass:"row"},[this.$slots.content?a("div",{staticClass:"content"},[e._t("content")],2):e._e(),this.$slots.extra?a("div",{staticClass:"extra"},[e._t("extra")],2):e._e()])])])])])},n=[],o={name:"PageHeader",props:{title:{type:String,required:!1},breadcrumb:{type:Array,required:!1},logo:{type:String,required:!1},avatar:{type:String,required:!1}},computed:{layout:function(){return this.$store.state.setting.layout}}},l=o,c=(a("f010"),a("2877")),d=Object(c["a"])(l,s,n,!1,null,"ecb806fe",null),u=d.exports,m={name:"PageLayout",components:{PageHeader:u},props:{desc:{type:String,default:""},logo:{type:String},title:{type:String,default:""},avatar:{type:String},linkList:{type:Array},extraImage:{type:String}},data:function(){return{breadcrumb:[]}},computed:{layout:function(){return this.$store.state.setting.layout}},mounted:function(){this.getBreadcrumb()},updated:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){this.breadcrumb=this.$route.matched}}},h=m,g=(a("d2e6"),Object(c["a"])(h,r,i,!1,null,"90fa1ce6",null));t["a"]=g.exports},"77b8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-layout",{attrs:{id:"home"}},[a("div",{staticClass:"extraImg",attrs:{slot:"extra"},slot:"extra"},[a("img",{attrs:{src:e.setting.extraImage}})]),a("transition",{attrs:{name:"page-toggle"}},[a("keep-alive",[a("a-card",{staticClass:"content"},[a("a-form",{attrs:{form:e.searchForm.form,layout:"inline"},on:{submit:e.onSearch}},[a("a-row",{attrs:{type:"flex",align:"middle"}},[a("a-col",[e.searchForm.schoolList.length>0?a("a-form-item",{attrs:{label:"学校"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["school",{initialValue:e.searchForm.schoolCode,rules:[{required:!0,message:"请选择学校"}]}],expression:"[\n                            'school',\n                            {\n                              initialValue: searchForm.schoolCode,\n                              rules: [{ required: true, message: '请选择学校' }]\n                            }\n                          ]"}],attrs:{placeholder:"请选择学校",showArrow:""},on:{change:e.onSchoolChange}},e._l(e.searchForm.schoolList,(function(t,r){return a("a-select-option",{key:r,staticStyle:{width:"100px"},attrs:{title:t.schoolName,value:t.schoolCode}},[e._v(" "+e._s(t.schoolName)+" ")])})),1)],1):e._e()],1),a("a-col",{staticStyle:{"flex-grow":"1"}},[a("a-form-item",[a("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.searchForm.isLoading,disabled:e.searchForm.isLoading}},[e._v(" 查询 ")])],1)],1),a("a-col",[a("a-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v(" 新增收费项目 ")])],1)],1)],1),a("a-table",{staticClass:"table",attrs:{columns:e.table.columns,dataSource:e.table.billList,rowKey:"id",bordered:"",loading:e.table.isLoading},scopedSlots:e._u([e._l(["id","orgNo","billName","description","status","createTime","updateTime"],(function(t){return{key:t,fn:function(r,i){return[a("div",{key:t},["status"===t?[0===i.status?[e._v(" 正常 ")]:[e._v(" 下线 ")]]:[e._v(e._s(r))]],2)]}}})),{key:"operation",fn:function(t,r){return[a("div",{staticClass:"editable-row-operations"},[a("span",[a("a",{on:{click:function(){return e.onEdit(r.id)}}},[e._v("修改")])])])]}}],null,!0)})],1)],1)],1),a("a-modal",{staticClass:"change-modal",attrs:{visible:e.editForm.isVisible,title:"更新缴费项目",okText:"确定",cancelText:"取消",okButtonProps:{props:{loading:e.editForm.isLoading}}},on:{cancel:e.cancelEdit,ok:e.saveEdit}},[a("a-form",{attrs:{layout:"vertical",form:e.editForm.form}},[a("a-form-item",{attrs:{label:"缴费项目名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["billName",{rules:[{required:!0,message:"请填写缴费项目名称"}],initialValue:e.editForm.data.billName}],expression:"[\n            'billName',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: '请填写缴费项目名称'\n                }\n              ],\n              initialValue: editForm.data.billName\n            }\n          ]"}],attrs:{autoFocus:""}})],1),a("a-form-item",{attrs:{label:"内容描述"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"请填写内容描述"}],initialValue:e.editForm.data.description}],expression:"[\n            'description',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: '请填写内容描述'\n                }\n              ],\n              initialValue: editForm.data.description\n            }\n          ]"}],staticStyle:{resize:"none"},attrs:{type:"textarea",rows:"5"}})],1),a("a-form-item",{attrs:{label:"项目状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0}],initialValue:e.editForm.data.status}],expression:"[\n            'status',\n            {\n              rules: [\n                {\n                  required: true\n                }\n              ],\n              initialValue: editForm.data.status\n            }\n          ]"}]},[a("a-radio",{attrs:{value:0}},[e._v("正常")]),a("a-radio",{attrs:{value:1}},[e._v("下线")])],1)],1)],1)],1),a("a-modal",{staticClass:"add-modal",attrs:{visible:e.addForm.isVisible,title:"新增缴费项目",okText:"确定",cancelText:"取消",okButtonProps:{props:{loading:e.addForm.isLoading}}},on:{cancel:e.cancelAdd,ok:e.saveAdd}},[a("a-form",{attrs:{layout:"vertical",form:e.addForm.form}},[e.searchForm.schoolList.length>0?a("a-form-item",{attrs:{label:"学校"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["schoolCode",{initialValue:e.searchForm.schoolCode,rules:[{required:!0,message:"请选择学校"}]}],expression:"[\n                    'schoolCode',\n                    {\n                      initialValue: searchForm.schoolCode,\n                      rules: [{ required: true, message: '请选择学校' }]\n                    }\n                  ]"}],attrs:{placeholder:"请选择学校",showArrow:""}},e._l(e.searchForm.schoolList,(function(t,r){return a("a-select-option",{key:r,staticStyle:{width:"100px"},attrs:{title:t.schoolName,value:t.schoolCode}},[e._v(" "+e._s(t.schoolName)+" ")])})),1)],1):e._e(),a("a-form-item",{attrs:{label:"缴费项目名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["billName",{rules:[{required:!0,message:"请填写缴费项目名称"}]}],expression:"[\n            'billName',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: '请填写缴费项目名称'\n                }\n              ]\n            }\n          ]"}],attrs:{autoFocus:""}})],1),a("a-form-item",{attrs:{label:"内容描述"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"请填写内容描述"}]}],expression:"[\n            'description',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: '请填写内容描述'\n                }\n              ]\n            }\n          ]"}],staticStyle:{resize:"none"},attrs:{type:"textarea",rows:"5"}})],1),a("a-form-item",{attrs:{label:"缴费条目"}},[a("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["productIds",{rules:[{required:!0,message:"请选择条目"}]}],expression:"[\n            'productIds',\n            {\n              rules: [\n                {\n                  required: true,\n                  message: '请选择条目'\n                }\n              ]\n            }\n          ]"}],staticStyle:{display:"flex","flex-wrap":"wrap"}},e._l(e.addForm.billProductsList,(function(t){return a("a-checkbox",{key:t.id,staticStyle:{"flex-grow":"1","margin-left":"0"},attrs:{value:t.id}},[e._v(" "+e._s(t.productName)+" ")])})),1)],1)],1)],1)],1)},i=[],s=(a("a4d3"),a("e01a"),a("4de4"),a("d3b7"),a("284c")),n=(a("96cf"),a("45eb")),o={name:"QueryList",components:{PageLayout:n["a"]},data:function(){return{setting:{title:"",desc:"",linkList:[],extraImage:""},searchForm:{form:this.$form.createForm(this,{name:"form"}),schoolList:[],schoolCode:"",isLoading:!1},addForm:{form:this.$form.createForm(this,{name:"addForm"}),billProductsList:[],isVisible:!1,isLoading:!1},editForm:{form:this.$form.createForm(this,{name:"editForm"}),data:{},isVisible:!1,isLoading:!1},table:{billList:[],isLoading:!1,columns:[{title:"ID",dataIndex:"id",scopedSlots:{customRender:"id"},align:"center"},{title:"学校编码",dataIndex:"orgNo",scopedSlots:{customRender:"orgNo"},align:"center"},{title:"项目名称",dataIndex:"billName",scopedSlots:{customRender:"billName"}},{title:"项目描述",dataIndex:"description",scopedSlots:{customRender:"description"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},align:"center"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"},align:"center"},{title:"更新时间",dataIndex:"updateTime",scopedSlots:{customRender:"updateTime"},align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"}]}}},methods:{onSearch:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),this.searchForm.isLoading=!0,t.next=4,regeneratorRuntime.awrap(this.getBillConfig());case 4:this.getBillProductsByOrg(),this.searchForm.isLoading=!1;case 6:case"end":return t.stop()}}),null,this)},onSchoolChange:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.searchForm.schoolCode=e,t.next=3,regeneratorRuntime.awrap(this.getBillProductsByOrg());case 3:case"end":return t.stop()}}),null,this)},onEdit:function(e){var t=Object(s["a"])(this.table.billList),a=t.filter((function(t){return e===t.id}))[0];this.editForm.data=a||{},this.editForm.form.resetFields(),this.editForm.isVisible=!0},saveEdit:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.updateBillConfig());case 2:this.getBillConfig(),this.getBillProductsByOrg();case 4:case"end":return e.stop()}}),null,this)},cancelEdit:function(){this.editForm.data={},this.editForm.isVisible=!1},onAdd:function(){this.addForm.isVisible=!0},saveAdd:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.createBillConfig());case 2:this.getBillConfig(),this.getBillProductsByOrg();case 4:case"end":return e.stop()}}),null,this)},cancelAdd:function(){this.addForm.isVisible=!1},updateBillConfig:function(){var e,t,a,r=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e=this.$createElement,this.editForm.isLoading=!0,this.editForm.form.validateFields((function(e,i){a=e,t={id:r.editForm.data.id,billName:i.billName,status:i.status,description:i.description}})),!a){i.next=7;break}this.editForm.isLoading=!1,i.next=12;break;case 7:return i.next=9,regeneratorRuntime.awrap(this.$api.updateBillConfig(t).then((function(t){if(1===t.code)r.$message.success("修改成功");else{var a=t.msg||t.message||"无反馈信息";r.$error({title:"错误",content:e("div",[e("p",["更新缴费信息失败"]),e("p",["错误提示: ",a])])})}})));case 9:this.editForm.data={},this.editForm.isLoading=!1,this.editForm.isVisible=!1;case 12:case"end":return i.stop()}}),null,this)},createBillConfig:function(){var e,t,a,r=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e=this.$createElement,this.addForm.isLoading=!0,this.addForm.form.validateFields((function(e,r){a=e,t={orgNo:r.schoolCode,billName:r.billName,description:r.description,productIds:Object(s["a"])(r.productIds)}})),!a){i.next=7;break}this.addForm.isLoading=!1,i.next=11;break;case 7:return i.next=9,regeneratorRuntime.awrap(this.$api.createBillConfig(t).then((function(t){if(r.addForm.billProductsList=[],1===t.code)r.$message.success("添加成功");else{var a=t.msg||t.message||"无反馈信息";r.$error({title:"错误",content:e("div",[e("p",["创建缴费信息失败"]),e("p",["错误提示: ",a])])})}})));case 9:this.addForm.isLoading=!1,this.addForm.isVisible=!1;case 11:case"end":return i.stop()}}),null,this)},getBillConfig:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=this.$createElement,this.table.isLoading=!0,this.table.billList=[],a.next=5,regeneratorRuntime.awrap(this.$api.getBillConfigBy({orgNo:this.searchForm.schoolCode,status:0}).then((function(a){if(1===a.code&&a.data)t.table.billList=a.data;else{var r=a.msg||a.message||"无反馈信息";t.$error({title:"错误",content:e("div",[e("p",["获取缴费信息失败"]),e("p",["错误提示: ",r])])})}})));case 5:this.table.isLoading=!1;case 6:case"end":return a.stop()}}),null,this)},getBillProductsByOrg:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=this.$createElement,this.addForm.billProductsList=[],a.next=4,regeneratorRuntime.awrap(this.$api.getBillProductsByOrg({orgNo:this.searchForm.schoolCode}).then((function(a){if(1===a.code&&a.data)t.addForm.billProductsList=a.data;else{var r=a.msg||a.message||"无反馈信息";t.$error({title:"错误",content:e("div",[e("p",["获取缴费产品列表失败"]),e("p",["错误提示: ",r])])})}})));case 4:case"end":return a.stop()}}),null,this)},findSchoolList:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=this.$createElement,a.next=3,regeneratorRuntime.awrap(this.$api.findSchoolList().then((function(a){if(1===a.code&&a.data){var r;t.searchForm.schoolCode=(null===a||void 0===a?void 0:null===(r=a.data[0])||void 0===r?void 0:r.schoolCode)||"",t.searchForm.schoolList=a.data}else{t.searchForm.schoolList=[],t.searchForm.schoolCode="";var i=a.msg||a.message||"无反馈信息";t.$error({title:"错误",content:e("div",[e("p",["获取学校列表失败"]),e("p",["错误提示: ",i])])})}})));case 3:case"end":return a.stop()}}),null,this)},initData:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.findSchoolList());case 2:this.getBillConfig(),this.getBillProductsByOrg();case 4:case"end":return e.stop()}}),null,this)}},mounted:function(){this.initData()}},l=o,c=(a("7885"),a("0ac6"),a("2877")),d=Object(c["a"])(l,r,i,!1,null,"2c1a96c5",null);t["default"]=d.exports},7885:function(e,t,a){"use strict";var r=a("29e2"),i=a.n(r);i.a},"7d6b":function(e,t,a){},d2e6:function(e,t,a){"use strict";var r=a("e675"),i=a.n(r);i.a},e181:function(e,t,a){},e675:function(e,t,a){},f010:function(e,t,a){"use strict";var r=a("e181"),i=a.n(r);i.a}}]);
//# sourceMappingURL=chunk-062f1996.aa1ed921.js.map