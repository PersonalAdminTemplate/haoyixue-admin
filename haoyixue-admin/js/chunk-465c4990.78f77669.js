(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-465c4990"],{1276:function(t,e,a){"use strict";var i=a("d784"),n=a("44e7"),s=a("825a"),r=a("1d80"),o=a("4840"),l=a("8aa5"),c=a("50c4"),d=a("14c3"),u=a("9263"),p=a("d039"),m=[].push,g=Math.min,v=4294967295,f=!p((function(){return!RegExp(v,"y")}));i("split",2,(function(t,e,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var i=String(r(this)),s=void 0===a?v:a>>>0;if(0===s)return[];if(void 0===t)return[i];if(!n(t))return e.call(i,t,s);var o,l,c,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,f=new RegExp(t.source,p+"g");while(o=u.call(f,i)){if(l=f.lastIndex,l>g&&(d.push(i.slice(g,o.index)),o.length>1&&o.index<i.length&&m.apply(d,o.slice(1)),c=o[0].length,g=l,d.length>=s))break;f.lastIndex===o.index&&f.lastIndex++}return g===i.length?!c&&f.test("")||d.push(""):d.push(i.slice(g)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var n=r(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,n,a):i.call(String(n),e,a)},function(t,n){var r=a(i,t,this,n,i!==e);if(r.done)return r.value;var u=s(t),p=String(this),m=o(u,RegExp),h=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),w=new m(f?u:"^(?:"+u.source+")",b),y=void 0===n?v:n>>>0;if(0===y)return[];if(0===p.length)return null===d(w,p)?[p]:[];var x=0,_=0,k=[];while(_<p.length){w.lastIndex=f?_:0;var C,L=d(w,f?p:p.slice(_));if(null===L||(C=g(c(w.lastIndex+(f?0:_)),p.length))===x)_=l(p,_,h);else{if(k.push(p.slice(x,_)),k.length===y)return k;for(var S=1;S<=L.length-1;S++)if(k.push(L[S]),k.length===y)return k;_=x=C}}return k.push(p.slice(x)),k}]}),!f)},"45eb":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"-24px -24px 0px"}},[a("page-header",{attrs:{breadcrumb:t.breadcrumb,title:t.title,logo:t.logo,avatar:t.avatar}},[t._t("action",null,{slot:"action"}),t._t("headerContent",null,{slot:"content"}),!this.$slots.headerContent&&t.desc?a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px","line-height":"1.5",color:"rgba(0,0,0,.65)"}},[t._v(" "+t._s(t.desc)+" ")]),a("div",{staticClass:"link"},[t._l(t.linkList,(function(e,i){return[a("a",{key:i,attrs:{href:e.href}},[a("a-icon",{attrs:{type:e.icon}}),t._v(t._s(e.title))],1)]}))],2)]):t._e(),t._t("extra",null,{slot:"extra"})],2),a("div",{ref:"page",class:["page-content",t.layout]},[t._t("default")],2)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("div",{class:["page-header-wide",t.layout]},[a("div",{staticClass:"breadcrumb"},[a("a-breadcrumb",t._l(t.breadcrumb,(function(e,i){return a("a-breadcrumb-item",{key:e.path},[a("span",0===i?[a("a",{attrs:{href:"#"}},[t._v(t._s(e.name))])]:[t._v(t._s(e.name))])])})),1)],1),a("div",{staticClass:"detail"},[t.avatar?a("div",{staticClass:"avatar"},[a("a-avatar",{attrs:{src:t.avatar}})],1):t._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"row"},[t.logo?a("img",{staticClass:"logo",attrs:{src:t.logo}}):t._e(),t.title?a("h1",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),a("div",{staticClass:"action"},[t._t("action")],2)]),a("div",{staticClass:"row"},[this.$slots.content?a("div",{staticClass:"content"},[t._t("content")],2):t._e(),this.$slots.extra?a("div",{staticClass:"extra"},[t._t("extra")],2):t._e()])])])])])},r=[],o={name:"PageHeader",props:{title:{type:String,required:!1},breadcrumb:{type:Array,required:!1},logo:{type:String,required:!1},avatar:{type:String,required:!1}},computed:{layout:function(){return this.$store.state.setting.layout}}},l=o,c=(a("f010"),a("2877")),d=Object(c["a"])(l,s,r,!1,null,"ecb806fe",null),u=d.exports,p={name:"PageLayout",components:{PageHeader:u},props:{desc:{type:String,default:""},logo:{type:String},title:{type:String,default:""},avatar:{type:String},linkList:{type:Array},extraImage:{type:String}},data:function(){return{breadcrumb:[]}},computed:{layout:function(){return this.$store.state.setting.layout}},mounted:function(){this.getBreadcrumb()},updated:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){this.breadcrumb=this.$route.matched}}},m=p,g=(a("d2e6"),Object(c["a"])(m,i,n,!1,null,"90fa1ce6",null));e["a"]=g.exports},"51d3":function(t,e,a){"use strict";var i=a("6f38"),n=a.n(i);n.a},"53d5":function(t,e,a){"use strict";var i=a("fcee"),n=a.n(i);n.a},"6f38":function(t,e,a){},9547:function(t,e,a){},d2e6:function(t,e,a){"use strict";var i=a("e675"),n=a.n(i);n.a},e181:function(t,e,a){},e675:function(t,e,a){},efc0:function(t,e,a){"use strict";var i=a("9547"),n=a.n(i);n.a},f010:function(t,e,a){"use strict";var i=a("e181"),n=a.n(i);n.a},fcee:function(t,e,a){},fd2f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-layout",{attrs:{desc:t.setting.desc,title:t.setting.title,linkList:t.setting.linkList,id:"news"}},[a("div",{staticClass:"extraImg",attrs:{slot:"extra"},slot:"extra"},[a("img",{attrs:{src:t.setting.extraImage}})]),a("transition",{attrs:{name:"page-toggle"}},[a("keep-alive",[a("a-card",{staticClass:"content"},[a("a-button",{attrs:{type:"primary"},on:{click:t.onAdd}},[t._v(" 新增新闻 ")]),a("a-table",{staticClass:"table",attrs:{columns:t.table.columns,dataSource:t.table.newsList,rowKey:"id",pagination:t.table.pagination,bordered:"",loading:t.table.isLoading},on:{change:t.onPageChange},scopedSlots:t._u([{key:"operation",fn:function(e,i){return[a("div",{staticClass:"editable-row-operations"},[a("span",[a("a",{staticStyle:{color:"#f5222d"},on:{click:function(){return t.onDelete(i.id)}}},[t._v("删除")])])])]}},{key:"content",fn:function(e){return[a("a-tooltip",{attrs:{placement:"bottomRight",title:e,overlayClassName:"overlay",autoAdjustOverflow:!0}},[a("p",{staticClass:"desc"},[t._v(" "+t._s(e)+" ")])])]}},{key:"image_url",fn:function(e,i){return[a("img",{staticClass:"table-pics",attrs:{src:i.image_url.split(";")[0],alt:"图裂了"},on:{click:function(e){return t.onTablePreview(i.image_url)}}})]}}])})],1)],1)],1),a("a-modal",{staticClass:"add-modal",attrs:{visible:t.addForm.isVisible,title:"新增新闻",okText:"确定",cancelText:"取消",okButtonProps:{props:{loading:t.addForm.isLoading}}},on:{cancel:t.cancelAdd,ok:t.saveAdd}},[a("a-form",{attrs:{layout:"vertical",form:t.addForm.form}},[a("a-form-item",{attrs:{label:"新闻标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["newsTitle",{rules:[{required:!0,message:"请填写新闻标题"}]}],expression:"[\n                  'newsTitle',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请填写新闻标题'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{autoFocus:""}})],1),a("a-form-item",{attrs:{label:"新闻副标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["newsSubhead",{rules:[{required:!0,message:"请填写新闻副标题"}]}],expression:"[\n                  'newsSubhead',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请填写新闻副标题'\n                      }\n                    ]\n                  }\n                ]"}],attrs:{autoFocus:""}})],1),a("a-form-item",{attrs:{label:"新闻图片"}},[a("div",[a("a-upload",{attrs:{action:t.addForm.action,listType:"picture-card",data:t.addForm.data,fileList:t.addForm.fileList,beforeUpload:t.beforeUpload,remove:t.onFileRemove},on:{preview:t.onUploadPreview}},[a("div",{attrs:{id:"dev"}},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("上传")])],1)])],1)]),a("a-form-item",{attrs:{label:"新闻内容"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请填写新闻内容"}]}],expression:"[\n                  'content',\n                  {\n                    rules: [\n                      {\n                        required: true,\n                        message: '请填写新闻内容'\n                      }\n                    ]\n                  }\n                ]"}],staticStyle:{resize:"none"},attrs:{type:"textarea",rows:"5"}})],1)],1)],1),a("a-modal",{attrs:{visible:t.addForm.isPreviewVisible,footer:null,width:1080},on:{cancel:t.onPreviewCancel}},[a("img",{attrs:{alt:"图裂了",src:t.addForm.previewImage}})]),a("a-modal",{attrs:{visible:t.table.isPreviewVisible,footer:null,width:1080},on:{cancel:function(e){t.table.isPreviewVisible=!1}}},[a("a-carousel",{attrs:{arrows:"",dotsClass:"slick-dots slick-thumb"},scopedSlots:t._u([{key:"customPaging",fn:function(e){return a("a",{},[a("img",{attrs:{src:t.table.previewImage[e.i]}})])}}])},t._l(t.table.previewImage,(function(t,e){return a("div",{key:e},[a("img",{attrs:{src:t}})])})),0)],1)],1)},n=[],s=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),a("159b"),a("284c")),r=(a("96cf"),a("45eb")),o={name:"QueryList",components:{PageLayout:r["a"]},data:function(){return{setting:{title:"",desc:"",linkList:[],extraImage:""},addForm:{form:this.$form.createForm(this,{name:"addForm"}),action:"https://upload.qiniup.com",data:{token:""},fileList:[],isVisible:!1,isLoading:!1,isPreviewVisible:!1,previewImage:""},table:{newsList:[],cacheList:[],isLoading:!1,previewImage:[],isPreviewVisible:!1,pagination:{current:1,total:1},columns:[{title:"ID",dataIndex:"id",width:60,scopedSlots:{customRender:"id"},align:"center"},{title:"新闻标题",dataIndex:"title",width:180,scopedSlots:{customRender:"title"}},{title:"新闻内容",dataIndex:"content",width:400,scopedSlots:{customRender:"content"}},{title:"新闻图片",align:"center",width:100,dataIndex:"image_url",scopedSlots:{customRender:"image_url"}},{title:"创建时间",width:180,dataIndex:"create_time",scopedSlots:{customRender:"create_time"},align:"center"},{title:"阅读数",dataIndex:"view_count",scopedSlots:{customRender:"view_count"},width:80,align:"center"},{title:"收藏数",width:80,dataIndex:"collect_count",scopedSlots:{customRender:"collect_count"},align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:80,align:"center"}]}}},methods:{onDelete:function(t){this.$info({title:"此功能还未启用",onOk:function(){}})},onAdd:function(){this.addForm.isVisible=!0},saveAdd:function(){this.$info({title:"此功能还未启用",onOk:function(){}})},cancelAdd:function(){this.addForm.isVisible=!1},onUpload:function(t){this.imgUpload(t)},onFileRemove:function(t){var e=this.addForm.fileList.filter((function(e){return e.uid!==t.uid}));this.addForm.fileList=e},beforeUpload:function(t){return this.onUpload(t),!1},onUploadPreview:function(t){this.addForm.previewImage=t.url||t.thumbUrl,this.addForm.isPreviewVisible=!0},onPreviewCancel:function(){this.addForm.isPreviewVisible=!1},onTablePreview:function(t){var e=t.split(";");this.table.previewImage=e,this.table.isPreviewVisible=!0},onPageChange:function(t){this.table.pagination.current=t.current,this.getNews()},imgUpload:function(t){var e,a,i=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e=this.$createElement,a=new FormData,a.append("token",this.addForm.data.token),a.append("file",t),n.next=6,regeneratorRuntime.awrap(this.$api.imgUpload(a).then((function(a){if(966!==a.code)t.url="http://user.duchengedu.com/".concat(null===a||void 0===a?void 0:a.key,"?attname=").concat(t.name),t.status="done",i.addForm.fileList=[].concat(Object(s["a"])(i.addForm.fileList),[t]);else{var n=a.msg||a.message||"无反馈信息";i.$error({title:"错误",content:e("div",[e("p",["上传图片失败"]),e("p",["错误提示: ",n])])})}})));case 6:case"end":return n.stop()}}),null,this)},getUploadToken:function(){var t,e=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:t=this.$createElement,this.$api.getUploadToken().then((function(a){if(1===a.code&&a.data){var i;e.addForm.data.token=(null===a||void 0===a?void 0:null===(i=a.data)||void 0===i?void 0:i.token)||""}else{var n=a.msg||a.message||"无反馈信息";e.$error({title:"错误",content:t("div",[t("p",["获取token失败"]),t("p",["错误提示: ",n])])})}}));case 2:case"end":return a.stop()}}),null,this)},getNews:function(){var t,e,a,i,n=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(t=this.$createElement,this.table.isLoading=!0,this.table.newsList=[],e={pageSize:10,pageNum:this.table.pagination.current},a=this.table.cacheList.filter((function(t){return t.pageNum===e.pageNum})),!(a.length>0)){s.next=10;break}this.table.newsList=a[0].list,this.table.pagination.total=a[0].total,s.next=13;break;case 10:return i={pageNum:e.pageNum},s.next=13,regeneratorRuntime.awrap(this.$api.getNews(e).then((function(e){if(1===e.code&&e.data){var a,s,r,o=(null===e||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.pageData)||[];o.forEach((function(t,e){t.key=e})),n.table.newsList=o,n.table.pagination.total=(null===e||void 0===e?void 0:null===(s=e.data)||void 0===s?void 0:s.dataTotal)||1,i.list=o,i.total=(null===e||void 0===e?void 0:null===(r=e.data)||void 0===r?void 0:r.dataTotal)||1,n.table.cacheList.push(i)}else{var l=e.msg||e.message||"无反馈信息";n.$error({title:"错误",content:t("div",[t("p",["获取新闻列表失败"]),t("p",["错误提示: ",l])])})}})));case 13:this.table.isLoading=!1;case 14:case"end":return s.stop()}}),null,this)},initData:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.getUploadToken(),this.getNews();case 2:case"end":return t.stop()}}),null,this)}},mounted:function(){this.initData()}},l=o,c=(a("53d5"),a("efc0"),a("51d3"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"5cc3f6eb",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-465c4990.78f77669.js.map